let page=1,total=0;const cita={name:"",date:"",time:"",tel:"",services:[]};function initApp(){showServices()}function showSection(){const e=document.querySelector(".visible");e&&e.classList.remove("visible");document.getElementById("step-"+page).classList.add("visible");const t=document.querySelector(`[data-step="${page}"]`),n=document.querySelector(".current");n&&n.classList.remove("current"),t.classList.add("current")}function changeSection(){document.querySelectorAll(".tabs > button").forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),page=parseInt(e.target.dataset.step),showSection(),pagination()})})}async function showServices(){try{const e=await fetch("./servicios.json"),t=await e.json(),{servicios:n}=t;n.forEach(e=>{const{id:t,nombre:n,precio:a}=e,s=document.createElement("P");s.textContent=n,s.classList.add("service-name");const c=document.createElement("P");c.textContent="Gs "+a.toLocaleString("es-ES"),c.classList.add("service-price");const o=document.createElement("DIV");o.classList.add("service"),o.onclick=selectService,o.dataset.serviceId=t,o.appendChild(s),o.appendChild(c),document.getElementById("services").appendChild(o)})}catch(e){console.log(e)}}function selectService(e){let t="P"===e.target.tagName?e.target.parentElement:e.target;if(t.classList.contains("selected")){t.classList.remove("selected");removeService(parseInt(t.dataset.serviceId))}else{t.classList.add("selected");addService({id:parseInt(t.dataset.serviceId),name:t.firstElementChild.textContent,price:t.lastElementChild.textContent})}}function removeService(e){const{services:t}=cita;cita.services=t.filter(t=>t.id!==e)}function addService(e){const{services:t}=cita;cita.services=[...t,e]}function nextPage(){document.getElementById("next").addEventListener("click",()=>{page++,pagination()})}function prevPage(){document.getElementById("prev").addEventListener("click",()=>{page--,pagination()})}function pagination(){const e=document.getElementById("next"),t=document.getElementById("prev");1===page?(t.classList.add("hide"),e.classList.remove("hide")):3===page?(t.classList.remove("hide"),e.classList.add("hide"),showResumen()):(t.classList.remove("hide"),e.classList.remove("hide")),showSection()}function showResumen(){const{name:e,date:t,time:n,tel:a,services:s}=cita,c=document.getElementById("step-3");for(;c.firstChild;)c.removeChild(c.firstChild);if(Object.values(cita).includes("")){const e=document.createElement("P");return e.textContent="Faltan datos de servicios, hora, fecha o su nombre",e.classList.add("invalid"),void c.appendChild(e)}const o=document.createElement("H2");o.textContent="Resumen de Cita";const i=document.createElement("P");i.innerHTML='<span class="bold">Nombre:</span> '+e;const d=document.createElement("P");d.innerHTML='<span class="bold">Fecha:</span> '+t;const r=document.createElement("P");r.innerHTML='<span class="bold">Hora:</span> '+n;const l=document.createElement("P");l.innerHTML='<span class="bold">Tu teléfono:</span> '+a;const m=document.createElement("H3");m.textContent="Resumen de servicios";const u=document.createElement("DIV");u.classList.add("resumen-services"),u.appendChild(m),s.forEach(e=>{const{name:t,price:n}=e,a=document.createElement("DIV");a.classList.add("service-container");const s=document.createElement("P");s.textContent=t;const c=document.createElement("P");c.textContent=n,c.classList.add("service-price");const o=parseInt(n.split(" ")[1].replace(".",""));total+=o,a.appendChild(s),a.appendChild(c),u.appendChild(a)});const p=document.getElementById("step-3");p.appendChild(o),p.appendChild(i),p.appendChild(d),p.appendChild(r),p.appendChild(l),p.appendChild(u);const v=document.createElement("P");v.classList.add("total"),v.innerHTML='<span class="bold">Total a pagar:</span> Gs '+total.toLocaleString("es-ES"),p.appendChild(v)}function getName(){document.getElementById("name").addEventListener("input",e=>{const t=e.target.value.trim();if(t.length<5)showAlert("Nombre no válido.","error");else{const e=document.querySelector(".alert");e&&e.remove(),cita.name=t}})}function showAlert(e,t){if(document.querySelector(".alert"))return;const n=document.createElement("DIV");n.textContent=e,n.classList.add("alert"),"error"===t&&n.classList.add("error");document.querySelector(".form").appendChild(n),setTimeout(()=>n.remove(),3e3)}function getDate(){const e=document.getElementById("date");e.addEventListener("input",t=>{const n=new Date(t.target.value).getUTCDay();[0,6].includes(n)?(t.preventDefault(),e.value="",showAlert("Solo atendemos de lunes a viernes.","error")):cita.date=e.value})}function disabledPastDates(){const e=document.getElementById("date"),t=new Date,n=`${t.getFullYear()}-${t.getMonth()<10?"0"+(t.getMonth()+1):t.getMonth()+1}-${t.getDate()<10?"0"+t.getDate():t.getDate()}`;e.min=n}function getTel(){const e=document.getElementById("tel"),t=/^[0-9]*$/;e.addEventListener("change",n=>{10===n.target.value.length&&t.test(n.target.value)?cita.tel=n.target.value:(showAlert("Pon un número válido (ej: 0981123456)","error"),cita.tel="",e.value="")})}function getTime(){$timeInput=document.getElementById("time"),$timeInput.addEventListener("change",e=>{const t=e.target.value.split(":")[0];if(parseInt(t)<8||parseInt(t)>20)return showAlert("Solo atendemos de 08:00 a 21:00 hs","error"),cita.time="",void($timeInput.value="");cita.time=$timeInput.value})}document.addEventListener("DOMContentLoaded",()=>{initApp(),showSection(),changeSection(),nextPage(),prevPage(),pagination(),disabledPastDates(),showResumen(),getName(),getDate(),getTime(),getTel()});
//# sourceMappingURL=bundle.js.map
